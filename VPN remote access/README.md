# VPN remote acces

**Тонкости, название внутрених продуктов и инструментов опущены, оставлена только основная информация**

**Данный материал не является примером методики тестирования, а только показывает используемые инстументы и подход к решению задачи!**

# Оглавление



# Схема стенда
![DUT](https://github.com/l-SK-l/My_projects/blob/main/VPN%20remote%20access/assets/VPN.png)

## Описание компонентов стенда
Описывается схема стенда с кратким пояснениям по каждому элементу

### Конфигурация стенда
Описываются: 
- Физические настройки машин
- Конфигурация VPN GW с описанием важных настроек
- Конфигурация сетевой части

## Описание взаимодействия
На нагрузочных машинах скриптами запускаются TAPs(слоны) которые динамически поднимают VPN туннели c GOST шифрованием для каждого виртуального пользователя, подключившись, пользователь начинает делать запросы пустой страницы с Nginx, тем самым контролиеруется его успешная работа. Основной целью тестирования является выявление максимального числа пользователей для конкретной аппаратно-програмной платформы, тестирование производительности, тестирование стабильноси и стрессовое тестирование. Отдельная машина VM с Win\Unix пользователь служит для проверки работоспособности, отладки, проверки производительности отдельных клиенских приложений и визуальной оценки работы удалённого доступа в различных режимах VPN.

# Конфигурационные файлы
Все конфигурационные файлы находят на VM Ansible\InfluxDB и автоматически раскладываются с помощью Ansible на каждую нагрузочную машину перед запуском каждой команды.
Запуск теста осуществляется с помощью переменных без необходимости редактирования конфигурационных файлов с помощтю ключей ansible `–extra-vars` или `-e`.

## YandexTank с Phantom
Указывается расположения файлов, команды запуска плейбука для запуска и остановки теста
yandex_tank_config.j2 #Редактировать необходимо каждую группу

```
phantom:  #Генератор трафика по умолчанию
  enabled: true  
  address: "{{ address }}:80"  #Адрес веб сервера
  uris:  #Путь к файлу
  - /{{ file }}.html
  phantom_http_entity: 20000M  #Макс размер скачиваемого файла
  load_profile:  #Профиль нагрузки
    load_type: instances  #Пользователи
    schedule: line(1,{{ line }},{{ line_time }}) const({{ const }},{{ const_time }})  #Расписание нагрузки для пользователей
rcheck:  #Проверка свободных ресурсов для генератора
  enabled: true
  mem_limit: 100  #Мин количество свободной оперативной памяти для работы
console:  #Вывод консоли при работе
  enabled: false
telegraf:  #Передача данных в telegraf для мониторинга
  enabled: false
```

